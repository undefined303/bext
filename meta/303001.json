{"type":"javascript","name":"网页弹窗拦截","version":"1.0.0","tags":["工具脚本","其他脚本"],"synopsis":"弹窗次数过多时询问是否拦截某弹窗","source":"const\nCONFIRM_COUNT = 5;/*当某弹窗弹出次数达到此值的倍数时，询问是否拦截*/\nconst originalConfirm =window.confirm;\n[\"alert\", \"confirm\", \"prompt\"].forEach((method) => {\nlet count = 0;\nlet count_time = 1;\nlet ignore = false;\nconst fn = window[method] ;\nwindow[method]=function(){\nif(ignore) {\nreturn undefined;\n}\nconst result = fn((arguments.length==0)?\"\":String(arguments[0]));\ncount++;\nif (count == CONFIRM_COUNT*count_time) {\nignore = originalConfirm(\n`当前网页已弹出`+method+`弹窗${count}次，是否忽略后续该弹窗`);\ncount_time++;\n}\nreturn result;\n};\n});","detail":"<p>网页弹窗有三种：alert，confirm，prompt，分别为：警告框，确认框和输入框，有的网站会滥用这三种弹窗，给用户造成极大的干扰。</p><p>脚本预设参数<strong>CONFIRM_COUNT=5</strong></p><p>（可修改），当某类弹窗弹出次数达该参数的倍数时，询问是否拦截该类弹窗，拦截刷新解除。</p>","extra":{"xMetaComment":"// @run-at document-start"},"build":"(function () {\n\t'use strict';\n\n\tconst\n\tCONFIRM_COUNT = 5;\n\tconst originalConfirm =window.confirm;\n\t[\"alert\", \"confirm\", \"prompt\"].forEach((method) => {\n\tlet count = 0;\n\tlet count_time = 1;\n\tlet ignore = false;\n\tconst fn = window[method] ;\n\twindow[method]=function(){\n\tif(ignore) {\n\treturn undefined;\n\t}\n\tconst result = fn((arguments.length==0)?\"\":String(arguments[0]));\n\tcount++;\n\tif (count == CONFIRM_COUNT*count_time) {\n\tignore = originalConfirm(\n`当前网页已弹出`\t+method+`弹窗${count}次，是否忽略后续该弹窗`);\n\tcount_time++;\n\t}\n\treturn result;\n\t};\n\t});\n\n})();\n"}
